{"ast":null,"code":"import _objectSpread from \"C:/GitRepHelpers/sandbox/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _jsxFileName = \"C:\\\\GitRepHelpers\\\\sandbox\\\\src\\\\imperative-component.jsx\",\n  _s = $RefreshSig$();\nimport { useThree } from '@react-three/fiber';\nimport React, { useMemo } from 'react';\nimport { forwardRef, Fragment, useImperativeHandle } from 'react';\nimport useStores from './store-context-provider/use-stores';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImperativeComponent = /*#__PURE__*/_s(/*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n  const {\n    onImpMount,\n    uniqueKey\n  } = props;\n  const {\n    appStore\n  } = useStores();\n\n  // state and store\n  const useThreeConetxt = useThree();\n  const {\n    gl,\n    scene,\n    camera\n  } = useThreeConetxt;\n  appStore.getState().setThreeObjects({\n    triggerInvalidate: memoizedInvalidate\n  });\n  const memoizedInvalidate = useMemo(() => {\n    return () => {\n      if (camera) {\n        gl.render(scene, camera);\n      } else {\n        console.warn(\"ImperativeComponent: No camera found for \".concat(uniqueKey));\n      }\n    };\n  }, [gl, scene, uniqueKey]);\n  useImperativeHandle(ref, () => _objectSpread(_objectSpread({}, useThreeConetxt), {}, {\n    triggerInvalidate: memoizedInvalidate\n  }));\n  onImpMount();\n  return /*#__PURE__*/_jsxDEV(Fragment, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 10\n  }, this);\n}, \"KYYrnXzSIXJQrJPOuOTwRGr6kr8=\", false, function () {\n  return [useStores, useThree];\n})), \"KYYrnXzSIXJQrJPOuOTwRGr6kr8=\", false, function () {\n  return [useStores, useThree];\n});\n_c2 = ImperativeComponent;\nexport default ImperativeComponent;\nvar _c, _c2;\n$RefreshReg$(_c, \"ImperativeComponent$forwardRef\");\n$RefreshReg$(_c2, \"ImperativeComponent\");","map":{"version":3,"names":["useThree","React","useMemo","forwardRef","Fragment","useImperativeHandle","useStores","jsxDEV","_jsxDEV","ImperativeComponent","_s","_c","props","ref","onImpMount","uniqueKey","appStore","useThreeConetxt","gl","scene","camera","getState","setThreeObjects","triggerInvalidate","memoizedInvalidate","render","console","warn","concat","_objectSpread","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["C:/GitRepHelpers/sandbox/src/imperative-component.jsx"],"sourcesContent":["import { useThree } from '@react-three/fiber'\r\nimport React, { useMemo } from 'react'\r\nimport { forwardRef, Fragment, useImperativeHandle } from 'react'\r\nimport useStores from './store-context-provider/use-stores'\r\n\r\nconst ImperativeComponent = forwardRef((props, ref) => {\r\n  const { onImpMount, uniqueKey } = props\r\n\r\n  const { appStore } = useStores()\r\n\r\n  // state and store\r\n  const useThreeConetxt = useThree()\r\n  const { gl, scene, camera } = useThreeConetxt\r\n\r\n  appStore.getState().setThreeObjects({\r\n    triggerInvalidate: memoizedInvalidate\r\n  })\r\n\r\n  const memoizedInvalidate = useMemo(() => {\r\n    return () => {\r\n      if (camera) {\r\n        gl.render(scene, camera)\r\n      } else {\r\n        console.warn(`ImperativeComponent: No camera found for ${uniqueKey}`)\r\n      }\r\n    }\r\n  }, [gl, scene, uniqueKey])\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    ...useThreeConetxt,\r\n    triggerInvalidate: memoizedInvalidate\r\n  }))\r\n\r\n  onImpMount()\r\n\r\n  return <Fragment />\r\n})\r\n\r\nexport default ImperativeComponent\r\n"],"mappings":";;;AAAA,SAASA,QAAQ,QAAQ,oBAAoB;AAC7C,OAAOC,KAAK,IAAIC,OAAO,QAAQ,OAAO;AACtC,SAASC,UAAU,EAAEC,QAAQ,EAAEC,mBAAmB,QAAQ,OAAO;AACjE,OAAOC,SAAS,MAAM,qCAAqC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE3D,MAAMC,mBAAmB,gBAAAC,EAAA,cAAGP,UAAU,CAAAQ,EAAA,GAAAD,EAAA,CAAC,CAACE,KAAK,EAAEC,GAAG,KAAK;EAAAH,EAAA;EACrD,MAAM;IAAEI,UAAU;IAAEC;EAAU,CAAC,GAAGH,KAAK;EAEvC,MAAM;IAAEI;EAAS,CAAC,GAAGV,SAAS,CAAC,CAAC;;EAEhC;EACA,MAAMW,eAAe,GAAGjB,QAAQ,CAAC,CAAC;EAClC,MAAM;IAAEkB,EAAE;IAAEC,KAAK;IAAEC;EAAO,CAAC,GAAGH,eAAe;EAE7CD,QAAQ,CAACK,QAAQ,CAAC,CAAC,CAACC,eAAe,CAAC;IAClCC,iBAAiB,EAAEC;EACrB,CAAC,CAAC;EAEF,MAAMA,kBAAkB,GAAGtB,OAAO,CAAC,MAAM;IACvC,OAAO,MAAM;MACX,IAAIkB,MAAM,EAAE;QACVF,EAAE,CAACO,MAAM,CAACN,KAAK,EAAEC,MAAM,CAAC;MAC1B,CAAC,MAAM;QACLM,OAAO,CAACC,IAAI,6CAAAC,MAAA,CAA6Cb,SAAS,CAAE,CAAC;MACvE;IACF,CAAC;EACH,CAAC,EAAE,CAACG,EAAE,EAAEC,KAAK,EAAEJ,SAAS,CAAC,CAAC;EAE1BV,mBAAmB,CAACQ,GAAG,EAAE,MAAAgB,aAAA,CAAAA,aAAA,KACpBZ,eAAe;IAClBM,iBAAiB,EAAEC;EAAkB,EACrC,CAAC;EAEHV,UAAU,CAAC,CAAC;EAEZ,oBAAON,OAAA,CAACJ,QAAQ;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACrB,CAAC;EAAA,QA5BsB3B,SAAS,EAGNN,QAAQ;AAAA,EAyBjC,CAAC;EAAA,QA5BqBM,SAAS,EAGNN,QAAQ;AAAA,EAyBhC;AAAAkC,GAAA,GA/BIzB,mBAAmB;AAiCzB,eAAeA,mBAAmB;AAAA,IAAAE,EAAA,EAAAuB,GAAA;AAAAC,YAAA,CAAAxB,EAAA;AAAAwB,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}