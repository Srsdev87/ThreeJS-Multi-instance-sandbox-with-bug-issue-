{"ast":null,"code":"import _objectSpread from \"C:/GitRepHelpers/sandbox/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"C:/GitRepHelpers/sandbox/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"background\", \"children\"];\nvar _jsxFileName = \"C:\\\\GitRepHelpers\\\\sandbox\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useEffect, useRef, useState, useCallback } from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport { useGLTF, View, Center, OrbitControls } from '@react-three/drei';\nimport TestPlugin from './test-plugin';\nimport ImperativeComponent from './imperative-component';\nimport StoresProvider from './store-context-provider/stores-provider';\nimport useStores from './store-context-provider/use-stores';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AppContent(_ref) {\n  _s();\n  let {\n    eventSourceRef,\n    uniqueKey\n  } = _ref;\n  const [impCompLoaded, setImpCompLoaded] = useState(false);\n  const impCompRef = useRef(null);\n  const onImpMount = useCallback(() => {\n    setImpCompLoaded(true);\n  }, []);\n  const {\n    appStore\n  } = useStores();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(Canvas, {\n      shadows: true,\n      frameloop: \"demand\",\n      className: \"canvas\",\n      eventSource: eventSourceRef.current,\n      children: [/*#__PURE__*/_jsxDEV(View.Port, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImperativeComponent, {\n        ref: impCompRef,\n        onImpMount: onImpMount,\n        uniqueKey: uniqueKey\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(View, {\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Scene, {\n        background: \"aquamarine\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(OrbitControls, {\n        makeDefault: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), impCompRef.current && impCompLoaded && /*#__PURE__*/_jsxDEV(TestPlugin, {\n      useThreeConetxt: impCompRef.current,\n      appStore: appStore\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 47\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 5\n  }, this);\n}\n_s(AppContent, \"bG8oh/d+B886gGAnjGasmgZ3nxY=\", false, function () {\n  return [useStores];\n});\n_c = AppContent;\nfunction Scene(_ref2) {\n  _s2();\n  let {\n      background = 'white',\n      children\n    } = _ref2,\n    props = _objectWithoutProperties(_ref2, _excluded);\n  const {\n    nodes,\n    materials\n  } = useGLTF('https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/bricks/model.gltf');\n  const meshRefs = useRef([]);\n  const {\n    appStore\n  } = useStores();\n  const ref = el => {\n    if (el) {\n      meshRefs.current.push(el);\n    }\n  };\n  useEffect(() => {\n    if (Object.keys(meshRefs.current).length > 0) {\n      appStore.getState().setMeshes(meshRefs.current);\n    }\n  }, [meshRefs]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"color\", {\n      attach: \"background\",\n      args: [background]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ambientLight\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"directionalLight\", {\n      position: [10, 10, -15],\n      castShadow: true,\n      \"shadow-bias\": -0.0001,\n      \"shadow-mapSize\": 1024\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"group\", _objectSpread(_objectSpread({\n      matrixAutoUpdate: false\n      // Why onUpdate and not just matrix={matrix} ?\n      // This is an implementation detail, overwriting (most) transform objects isn't possible in Threejs\n      // because they are defined read-only. Therefore Fiber will always call .copy() if you pass\n      // an object, for instance matrix={new THREE.Matrix4()} or position={new THREE.Vector3()}\n      // In this rare case we do not want it to copy the matrix, but refer to it.\n    }, props), {}, {\n      children: [/*#__PURE__*/_jsxDEV(Center, {\n        children: /*#__PURE__*/_jsxDEV(\"mesh\", {\n          ref: ref,\n          castShadow: true,\n          geometry: nodes.bricks.geometry,\n          material: materials['Stone.014'],\n          rotation: [Math.PI / 2, 0, 0],\n          children: /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n            color: \"goldenrod\",\n            roughness: 0,\n            metalness: 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), children]\n    }), void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s2(Scene, \"AJqpm2Nwb5r9R8dK2WmZhu7YRu8=\", false, function () {\n  return [useGLTF, useStores];\n});\n_c2 = Scene;\nconst App = _ref3 => {\n  let {\n    eventSourceRef,\n    uniqueKey\n  } = _ref3;\n  return /*#__PURE__*/_jsxDEV(StoresProvider, {\n    children: /*#__PURE__*/_jsxDEV(AppContent, {\n      eventSourceRef: eventSourceRef,\n      uniqueKey: uniqueKey\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_c3 = App;\nexport default App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"AppContent\");\n$RefreshReg$(_c2, \"Scene\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["useEffect","useRef","useState","useCallback","Canvas","useGLTF","View","Center","OrbitControls","TestPlugin","ImperativeComponent","StoresProvider","useStores","jsxDEV","_jsxDEV","Fragment","_Fragment","AppContent","_ref","_s","eventSourceRef","uniqueKey","impCompLoaded","setImpCompLoaded","impCompRef","onImpMount","appStore","className","children","shadows","frameloop","eventSource","current","Port","fileName","_jsxFileName","lineNumber","columnNumber","ref","style","position","top","left","width","height","Scene","background","makeDefault","useThreeConetxt","_c","_ref2","_s2","props","_objectWithoutProperties","_excluded","nodes","materials","meshRefs","el","push","Object","keys","length","getState","setMeshes","attach","args","castShadow","_objectSpread","matrixAutoUpdate","geometry","bricks","material","rotation","Math","PI","color","roughness","metalness","_c2","App","_ref3","_c3","$RefreshReg$"],"sources":["C:/GitRepHelpers/sandbox/src/App.js"],"sourcesContent":["import { useEffect, useRef, useState, useCallback } from 'react'\nimport { Canvas } from '@react-three/fiber'\nimport { useGLTF, View, Center, OrbitControls } from '@react-three/drei'\nimport TestPlugin from './test-plugin'\nimport ImperativeComponent from './imperative-component'\nimport StoresProvider from './store-context-provider/stores-provider'\nimport useStores from './store-context-provider/use-stores'\n\nfunction AppContent({ eventSourceRef, uniqueKey }) {\n  const [impCompLoaded, setImpCompLoaded] = useState(false)\n  const impCompRef = useRef(null)\n\n  const onImpMount = useCallback(() => {\n    setImpCompLoaded(true)\n  }, [])\n\n  const { appStore } = useStores()\n\n  return (\n    <div className=\"container\">\n      {/** A single canvas, it will only render when things move or change, and otherwise stay idle ... */}\n\n      <Canvas shadows frameloop=\"demand\" className=\"canvas\" eventSource={eventSourceRef.current}>\n        {/** Each view tracks one of the divs above and creates a sandboxed environment that behaves\n             as if it were a normal everyday canvas, <View> will figure out the gl.scissor stuff alone. */}\n        <View.Port />\n        <ImperativeComponent ref={impCompRef} onImpMount={onImpMount} uniqueKey={uniqueKey} />\n      </Canvas>\n\n      <View style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}>\n        <Scene background=\"aquamarine\"></Scene>\n        <OrbitControls makeDefault />\n      </View>\n\n      {impCompRef.current && impCompLoaded && <TestPlugin useThreeConetxt={impCompRef.current} appStore={appStore}></TestPlugin>}\n    </div>\n  )\n}\n\nfunction Scene({ background = 'white', children, ...props }) {\n  const { nodes, materials } = useGLTF('https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/bricks/model.gltf')\n  const meshRefs = useRef([])\n  const { appStore } = useStores()\n\n  const ref = (el) => {\n    if (el) {\n      meshRefs.current.push(el)\n    }\n  }\n\n  useEffect(() => {\n    if (Object.keys(meshRefs.current).length > 0) {\n      appStore.getState().setMeshes(meshRefs.current)\n    }\n  }, [meshRefs])\n\n  return (\n    <>\n      <color attach=\"background\" args={[background]} />\n      <ambientLight />\n      <directionalLight position={[10, 10, -15]} castShadow shadow-bias={-0.0001} shadow-mapSize={1024} />\n      <group\n        matrixAutoUpdate={false}\n        // Why onUpdate and not just matrix={matrix} ?\n        // This is an implementation detail, overwriting (most) transform objects isn't possible in Threejs\n        // because they are defined read-only. Therefore Fiber will always call .copy() if you pass\n        // an object, for instance matrix={new THREE.Matrix4()} or position={new THREE.Vector3()}\n        // In this rare case we do not want it to copy the matrix, but refer to it.\n        {...props}>\n        <Center>\n          <mesh ref={ref} castShadow geometry={nodes.bricks.geometry} material={materials['Stone.014']} rotation={[Math.PI / 2, 0, 0]}>\n            <meshStandardMaterial color=\"goldenrod\" roughness={0} metalness={1} />\n          </mesh>\n        </Center>\n        {children}\n      </group>\n    </>\n  )\n}\n\nconst App = ({ eventSourceRef, uniqueKey }) => {\n  return (\n    <StoresProvider>\n      <AppContent eventSourceRef={eventSourceRef} uniqueKey={uniqueKey} />\n    </StoresProvider>\n  )\n}\n\nexport default App\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}